{% extends "base.html" %}

{% block title %}テーブル一覧 - DBメンテ{% endblock %}

{% block head %}
<style>
  .page-title { font-size: 18px; font-weight: bold; margin: 0 0 16px 0; padding-bottom: 8px; border-bottom: 2px solid #333; }
  .table-list { width: 100%; border-collapse: collapse; }
  .table-list th, .table-list td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  .table-list th { background: #e8eefa; }
  .table-list tr:hover { background: #f5f5f5; }
  .table-link { color: #0066cc; text-decoration: none; }
  .table-link:hover { text-decoration: underline; }
  .no-data { color: #666; font-style: italic; padding: 16px 0; }
  .nav-links { margin-top: 16px; }
  .nav-links a { color: #0066cc; text-decoration: none; }
  .nav-links a:hover { text-decoration: underline; }
</style>
{% endblock %}

{% block content %}
<div class="page-title">テーブル一覧</div>

{% if tables %}
<table class="table-list">
  <thead>
    <tr>
      <th>テーブル名</th>
      <th>行数</th>
      <th>最終分析日</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    {% for table in tables %}
    <tr>
      <td>{{ table.table_name }}</td>
      <td>{{ table.num_rows }}</td>
      <td>{{ table.last_analyzed or '-' }}</td>
      <td><a class="table-link" href="/table/maintenance?table_name={{ table.table_name }}">編集</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="no-data">テーブルが見つかりません。Oracle接続を確認してください。</p>
{% endif %}

<div class="nav-links">
  <a href="/menu">メニューへ戻る</a>
</div>
{% endblock %}
